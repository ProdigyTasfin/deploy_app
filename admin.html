<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶®‡¶ø‡¶¨‡¶æ‡¶∏ - ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&family=Kalpurush&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5629be;
            --primary-light: #a78bfa;
            --secondary: #0eaa69c5;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --dark-text: #f1f5f9;
            --dark-border: #334155;
            --light-bg: #f8fafc;
            --light-card: #ffffff;
            --light-text: #1e293b;
            --light-border: #e2e8f0;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Hind Siliguri', 'Kalpurush', system-ui, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--dark-text);
            min-height: 100vh;
        }

        body.light-mode {
            background: var(--light-bg);
            color: var(--light-text);
        }

        /* Header */
        .header {
            padding: 1rem 2rem;
            background: var(--dark-card);
            border-bottom: 1px solid var(--dark-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .light-mode .header {
            background: var(--light-card);
            border-bottom: 1px solid var(--light-border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Dashboard Layout */
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: calc(100vh - 70px);
        }

        /* Sidebar */
        .sidebar {
            background: var(--dark-card);
            border-right: 1px solid var(--dark-border);
            padding: 1.5rem 0;
        }

        .light-mode .sidebar {
            background: var(--light-card);
            border-right: 1px solid var(--light-border);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 0.25rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: var(--dark-text);
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
        }

        .light-mode .nav-link {
            color: var(--light-text);
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(86, 41, 190, 0.1);
            color: var(--primary);
            border-right: 3px solid var(--primary);
        }

        .nav-link i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            padding: 2rem;
            overflow-y: auto;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--dark-card);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--dark-border);
            text-align: center;
        }

        .light-mode .stat-card {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 1rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.9rem;
        }

        .light-mode .stat-label {
            color: #64748b;
        }

        /* Tables */
        .table-container {
            background: var(--dark-card);
            border-radius: 12px;
            border: 1px solid var(--dark-border);
            overflow: hidden;
            margin-top: 1.5rem;
        }

        .light-mode .table-container {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .table-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--dark-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .light-mode .table-header {
            border-bottom: 1px solid var(--light-border);
        }

        .table-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark-text);
        }

        .light-mode .table-title {
            color: var(--light-text);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            padding: 1rem;
            text-align: left;
            background: rgba(86, 41, 190, 0.1);
            color: var(--dark-text);
            font-weight: 600;
            border-bottom: 1px solid var(--dark-border);
        }

        .light-mode .table th {
            background: rgba(86, 41, 190, 0.05);
            color: var(--light-text);
            border-bottom: 1px solid var(--light-border);
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid var(--dark-border);
        }

        .light-mode .table td {
            border-bottom: 1px solid var(--light-border);
        }

        .table tbody tr:hover {
            background: rgba(86, 41, 190, 0.05);
        }

        /* Status Badges */
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            display: inline-block;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .status-approved {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .status-rejected {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger);
        }

        .status-active {
            background: rgba(86, 41, 190, 0.15);
            color: var(--primary);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-info {
            background: var(--info);
            color: white;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-content {
            background: var(--dark-card);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--dark-border);
        }

        .light-mode .modal-content {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--dark-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .light-mode .modal-header {
            border-bottom: 1px solid var(--light-border);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark-text);
        }

        .light-mode .modal-title {
            color: var(--light-text);
        }

        .modal-close {
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-size: 1.5rem;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--dark-border);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .light-mode .modal-footer {
            border-top: 1px solid var(--light-border);
        }

        /* Filter */
        .filter-bar {
            background: var(--dark-card);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .light-mode .filter-bar {
            background: var(--light-card);
        }

        .filter-select {
            padding: 0.5rem 1rem;
            background: var(--dark-bg);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: var(--dark-text);
        }

        .light-mode .filter-select {
            background: var(--light-bg);
            border: 1px solid var(--light-border);
            color: var(--light-text);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Header -->
    <header class="header">
        <a href="index.html" class="logo">
            <i class="fas fa-user-shield"></i>
            <span>‡¶®‡¶ø‡¶¨‡¶æ‡¶∏ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</span>
        </a>
        
        <div class="user-info" id="userInfo">
            <!-- Will be populated by JavaScript -->
        </div>
    </header>

    <!-- Dashboard -->
    <div class="dashboard">
        <!-- Sidebar -->
        <nav class="sidebar">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-section="professionals">
                        <i class="fas fa-user-cog"></i>
                        ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-section="service-requests">
                        <i class="fas fa-tools"></i>
                        ‡¶∏‡ßá‡¶¨‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-section="users">
                        <i class="fas fa-users"></i>
                        ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-section="payments">
                        <i class="fas fa-credit-card"></i>
                        ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <div class="section active" id="dashboardSection">
                <h2 style="margin-bottom: 1.5rem;">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-cog"></i>
                        </div>
                        <div class="stat-value" id="pendingProfessionals">‡ß¶</div>
                        <div class="stat-label">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶® ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="stat-value" id="pendingRequests">‡ß¶</div>
                        <div class="stat-label">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶® ‡¶∏‡ßá‡¶¨‡¶æ</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-value" id="totalUsers">‡ß¶</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-value" id="totalRevenue">‡ß≥ ‡ß¶</div>
                        <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶Ø‡¶º</div>
                    </div>
                </div>
                
                <div class="table-container">
                    <div class="table-header">
                        <h3 class="table-title">‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®</h3>
                        <a href="#professionals" class="btn btn-primary" onclick="showSection('professionals')">
                            <i class="fas fa-eye"></i> ‡¶∏‡¶¨ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                        </a>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</th>
                                <th>‡¶∏‡ßá‡¶¨‡¶æ</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="recentProfessionals">
                            <!-- Will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
                
                <div class="table-container" style="margin-top: 1.5rem;">
                    <div class="table-header">
                        <h3 class="table-title">‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶∏‡ßá‡¶¨‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß</h3>
                        <a href="#service-requests" class="btn btn-primary" onclick="showSection('service-requests')">
                            <i class="fas fa-eye"></i> ‡¶∏‡¶¨ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                        </a>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï</th>
                                <th>‡¶∏‡ßá‡¶¨‡¶æ</th>
                                <th>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                            </tr>
                        </thead>
                        <tbody id="recentRequests">
                            <!-- Will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Professionals Section -->
            <div class="section" id="professionalsSection">
                <h2 style="margin-bottom: 1rem;">‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h2>
                
                <div class="filter-bar">
                    <select class="filter-select" id="professionalFilter" onchange="filterProfessionals()">
                        <option value="all">‡¶∏‡¶¨ ‡¶Ü‡¶¨‡ßá‡¶¶‡¶®</option>
                        <option value="pending">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®</option>
                        <option value="approved">‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§</option>
                        <option value="rejected">‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶§</option>
                    </select>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</th>
                                <th>‡¶´‡ßã‡¶®</th>
                                <th>‡¶∏‡ßá‡¶¨‡¶æ</th>
                                <th>‡¶è‡¶®‡¶Ü‡¶á‡¶°‡¶ø</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="professionalsTable">
                            <!-- Will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Service Requests Section -->
            <div class="section" id="serviceRequestsSection">
                <h2 style="margin-bottom: 1rem;">‡¶∏‡ßá‡¶¨‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß</h2>
                
                <div class="filter-bar">
                    <select class="filter-select" id="requestFilter" onchange="filterRequests()">
                        <option value="all">‡¶∏‡¶¨ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß</option>
                        <option value="pending">‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®</option>
                        <option value="assigned">‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó</option>
                        <option value="completed">‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®</option>
                        <option value="cancelled">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</option>
                    </select>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶Ü‡¶á‡¶°‡¶ø</th>
                                <th>‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï</th>
                                <th>‡¶∏‡ßá‡¶¨‡¶æ</th>
                                <th>‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ</th>
                                <th>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="requestsTable">
                            <!-- Will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Users Section -->
            <div class="section" id="usersSection">
                <h2 style="margin-bottom: 1rem;">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</h2>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶á‡¶Æ‡ßá‡¶á‡¶≤</th>
                                <th>‡¶´‡ßã‡¶®</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™</th>
                                <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                                <th>‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Payments Section -->
            <div class="section" id="paymentsSection">
                <h2 style="margin-bottom: 1rem;">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶™‡¶®‡¶æ</h2>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø</th>
                                <th>‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï</th>
                                <th>‡¶™‡¶∞‡¶ø‡¶∑‡ßá‡¶¨‡¶æ</th>
                                <th>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="paymentsTable">
                            <!-- Payments will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Professional Details Modal -->
    <div class="modal" id="professionalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="professionalModalBody">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Service Request Details Modal -->
    <div class="modal" id="requestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‡¶∏‡ßá‡¶¨‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="requestModalBody">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        let currentAdmin = null;
        let selectedProfessional = null;
        let selectedRequest = null;

        // Initialize admin dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Admin dashboard loading...');
            checkAdminAccess();
        });

        // Single admin access check function
        function checkAdminAccess() {
    console.log('üîê Checking admin access...');
    
    const userToken = localStorage.getItem('nibash_token');
    const userData = localStorage.getItem('nibash_user');
    
    if (!userToken || !userData) {
        console.log('‚ùå No admin session found');
        alert('Please login to admin panel');
        window.location.href = 'admin-login.html';
        return;
    }
    
    try {
        const user = JSON.parse(userData);
        
        // Simple check for admin
        const isAdmin = user.role === 'admin' || 
                       user.account_type === 'admin' ||
                       user.email.includes('admin') ||
                       user.email.endsWith('@nibash.org');
        
        if (!isAdmin) {
            console.log('‚ùå Not an admin:', user.email);
            alert('Admin access only');
            window.location.href = 'index.html';
            return;
        }
        
        console.log('‚úÖ Admin verified:', user.email);
        currentAdmin = user;
        initAdminPanel();
        
    } catch (error) {
        console.error('Admin check error:', error);
        window.location.href = 'admin-login.html';
    }
}

        // Initialize admin panel
        function initAdminPanel() {
            console.log('üéØ Initializing admin panel...');
            
            updateUserInfo();
            setupNavigation();
            loadDashboardData();
            loadAllProfessionals();
            loadAllServiceRequests();
            loadAllUsers();
            loadAllPayments();
        }

        // Update user info display
        function updateUserInfo() {
            const userInfo = document.getElementById('userInfo');
            if (!userInfo || !currentAdmin) return;
            
            const userName = currentAdmin.fullName || '‡¶è‡¶°‡¶Æ‡¶ø‡¶®';
            const userInitial = userName.charAt(0).toUpperCase();
            
            userInfo.innerHTML = `
                <div class="user-avatar">${userInitial}</div>
                <div>
                    <div style="font-weight: 600;">${userName}</div>
                    <div style="font-size: 0.85rem; color: #94a3b8;">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶è‡¶°‡¶Æ‡¶ø‡¶®</div>
                </div>
            `;
        }

        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link[data-section]');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    
                    // Update active states
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected section
                    showSection(sectionId);
                });
            });
        }

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            const section = document.getElementById(sectionId + 'Section');
            if (section) {
                section.classList.add('active');
            }
        }

        // Load dashboard statistics
        async function loadDashboardData() {
            // Load data from localStorage
            const applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            const serviceRequests = JSON.parse(localStorage.getItem('service_requests') || '[]');
            const users = JSON.parse(localStorage.getItem('nibash_users') || '[]');
            const payments = JSON.parse(localStorage.getItem('user_payments') || '[]');
            
            // Update stats
            document.getElementById('pendingProfessionals').textContent = 
                applications.filter(app => app.status === 'pending').length;
            
            document.getElementById('pendingRequests').textContent = 
                serviceRequests.filter(req => req.status === 'pending').length;
            
            document.getElementById('totalUsers').textContent = users.length;
            
            const totalRevenue = payments.reduce((sum, payment) => {
                return sum + (parseFloat(payment.amount) || 0);
            }, 0);
            document.getElementById('totalRevenue').textContent = `‡ß≥ ${totalRevenue.toLocaleString()}`;
            
            // Load recent professionals
            loadRecentProfessionals();
            
            // Load recent service requests
            loadRecentServiceRequests();
        }

        function loadRecentProfessionals() {
            const applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            const recent = applications.slice(-5).reverse();
            const tbody = document.getElementById('recentProfessionals');
            
            if (recent.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 2rem; color: #94a3b8;">
                            <i class="fas fa-user-cog" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <div>‡¶ï‡ßã‡¶® ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶®‡ßá‡¶á</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = recent.map(professional => `
                <tr>
                    <td>${professional.fullName || 'N/A'}</td>
                    <td>${professional.email}</td>
                    <td>${professional.service || 'N/A'}</td>
                    <td>${new Date(professional.createdAt).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <span class="status-badge ${getStatusClass(professional.status)}">
                            ${getStatusText(professional.status)}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-info" onclick="viewProfessional('${professional.email}')" style="padding: 0.25rem 0.5rem; font-size: 0.85rem;">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function loadRecentServiceRequests() {
            const requests = JSON.parse(localStorage.getItem('service_requests') || '[]');
            const recent = requests.slice(-5).reverse();
            const tbody = document.getElementById('recentRequests');
            
            if (recent.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 2rem; color: #94a3b8;">
                            <i class="fas fa-tools" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <div>‡¶ï‡ßã‡¶® ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶®‡ßá‡¶á</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = recent.map(request => `
                <tr>
                    <td>${request.customerName || '‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï'}</td>
                    <td>${getServiceName(request.serviceType)}</td>
                    <td>${request.customerAddress ? request.customerAddress.substring(0, 30) + '...' : 'N/A'}</td>
                    <td>${new Date(request.createdAt || new Date()).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <span class="status-badge ${getStatusClass(request.status)}">
                            ${getStatusText(request.status)}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        // Load all professionals for management
        function loadAllProfessionals() {
            const applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            const tbody = document.getElementById('professionalsTable');
            
            if (applications.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 2rem; color: #94a3b8;">
                            <i class="fas fa-user-cog" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <div>‡¶ï‡ßã‡¶® ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶®‡ßá‡¶á</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            renderProfessionalsTable(applications);
        }

        function renderProfessionalsTable(professionals) {
            const tbody = document.getElementById('professionalsTable');
            
            tbody.innerHTML = professionals.map(professional => `
                <tr>
                    <td>${professional.fullName || 'N/A'}</td>
                    <td>${professional.email}</td>
                    <td>${professional.phone || 'N/A'}</td>
                    <td>${professional.service || 'N/A'}</td>
                    <td>${professional.nid || 'N/A'}</td>
                    <td>${new Date(professional.createdAt).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <span class="status-badge ${getStatusClass(professional.status)}">
                            ${getStatusText(professional.status)}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-info" onclick="viewProfessional('${professional.email}')" style="padding: 0.25rem 0.5rem;">
                                <i class="fas fa-eye"></i>
                            </button>
                            ${professional.status === 'pending' ? `
                                <button class="btn btn-success" onclick="approveProfessional('${professional.email}')" style="padding: 0.25rem 0.5rem;">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn btn-danger" onclick="rejectProfessional('${professional.email}')" style="padding: 0.25rem 0.5rem;">
                                    <i class="fas fa-times"></i>
                                </button>
                            ` : ''}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Filter professionals by status
        function filterProfessionals() {
            const filter = document.getElementById('professionalFilter').value;
            const applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            
            let filtered = applications;
            if (filter !== 'all') {
                filtered = applications.filter(app => app.status === filter);
            }
            
            renderProfessionalsTable(filtered);
        }

        // Load all service requests
        function loadAllServiceRequests() {
            const requests = JSON.parse(localStorage.getItem('service_requests') || '[]');
            renderRequestsTable(requests);
        }

        function renderRequestsTable(requests) {
            const tbody = document.getElementById('requestsTable');
            
            if (requests.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 2rem; color: #94a3b8;">
                            <i class="fas fa-tools" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <div>‡¶ï‡ßã‡¶® ‡¶∏‡ßá‡¶¨‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶®‡ßá‡¶á</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = requests.map(request => `
                <tr>
                    <td>${request.id || 'N/A'}</td>
                    <td>${request.customerName || '‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï'}</td>
                    <td>${getServiceName(request.serviceType)}</td>
                    <td>${request.problemDescription ? request.problemDescription.substring(0, 50) + '...' : 'N/A'}</td>
                    <td>${request.customerAddress ? request.customerAddress.substring(0, 30) + '...' : 'N/A'}</td>
                    <td>${new Date(request.createdAt || new Date()).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <span class="status-badge ${getStatusClass(request.status)}">
                            ${getStatusText(request.status)}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-info" onclick="viewServiceRequest('${request.id}')" style="padding: 0.25rem 0.5rem;">
                                <i class="fas fa-eye"></i>
                            </button>
                            ${request.status === 'pending' ? `
                                <button class="btn btn-success" onclick="assignProfessional('${request.id}')" style="padding: 0.25rem 0.5rem;">
                                    <i class="fas fa-user-cog"></i>
                                </button>
                            ` : ''}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Filter service requests
        function filterRequests() {
            const filter = document.getElementById('requestFilter').value;
            const requests = JSON.parse(localStorage.getItem('service_requests') || '[]');
            
            let filtered = requests;
            if (filter !== 'all') {
                filtered = requests.filter(req => req.status === filter);
            }
            
            renderRequestsTable(filtered);
        }

        // Load all users
        function loadAllUsers() {
            const users = JSON.parse(localStorage.getItem('nibash_users') || '[]');
            const tbody = document.getElementById('usersTable');
            
            if (users.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: #94a3b8;">
                            <i class="fas fa-users" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <div>‡¶ï‡ßã‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶®‡ßá‡¶á</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = users.map(user => `
                <tr>
                    <td>${user.fullName || 'N/A'}</td>
                    <td>${user.email}</td>
                    <td>${user.phone || 'N/A'}</td>
                    <td>${user.role || user.accountType || 'customer'}</td>
                    <td>
                        <span class="status-badge ${user.status === 'active' ? 'status-active' : 'status-pending'}">
                            ${user.status === 'active' ? '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º' : '‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º'}
                        </span>
                    </td>
                    <td>${new Date(user.createdAt || new Date()).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <button class="btn btn-info" onclick="viewUser('${user.email}')" style="padding: 0.25rem 0.5rem;">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Load all payments
        function loadAllPayments() {
            const payments = JSON.parse(localStorage.getItem('user_payments') || '[]');
            const tbody = document.getElementById('paymentsTable');
            
            if (payments.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: #94a3b8;">
                            <i class="fas fa-credit-card" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <div>‡¶ï‡ßã‡¶® ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = payments.map(payment => `
                <tr>
                    <td>${payment.id || 'N/A'}</td>
                    <td>${payment.customerName || '‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï'}</td>
                    <td>${payment.description || '‡¶∏‡ßá‡¶¨‡¶æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü'}</td>
                    <td>‡ß≥ ${parseFloat(payment.amount || 0).toLocaleString()}</td>
                    <td>${new Date(payment.date || new Date()).toLocaleDateString('bn-BD')}</td>
                    <td>
                        <span class="status-badge ${payment.status === 'completed' ? 'status-approved' : 
                            payment.status === 'pending' ? 'status-pending' : 'status-rejected'}">
                            ${payment.status === 'completed' ? '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®' : 
                             payment.status === 'pending' ? '‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®' : '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤'}
                        </span>
                    </td>
                    <td>
                        <button class="btn btn-info" onclick="viewPayment('${payment.id}')" style="padding: 0.25rem 0.5rem;">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // View professional details
        function viewProfessional(email) {
            const applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            const professional = applications.find(app => app.email === email);
            
            if (!professional) {
                alert('‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø');
                return;
            }
            
            selectedProfessional = professional;
            
            document.getElementById('professionalModalBody').innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</h4>
                    <div style="background: rgba(86, 41, 190, 0.1); padding: 1rem; border-radius: 8px;">
                        <p><strong>‡¶®‡¶æ‡¶Æ:</strong> ${professional.fullName}</p>
                        <p><strong>‡¶á‡¶Æ‡ßá‡¶á‡¶≤:</strong> ${professional.email}</p>
                        <p><strong>‡¶´‡ßã‡¶®:</strong> ${professional.phone || 'N/A'}</p>
                        <p><strong>‡¶è‡¶®‡¶Ü‡¶á‡¶°‡¶ø:</strong> ${professional.nid || 'N/A'}</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">‡¶™‡ßá‡¶∂‡¶æ‡¶ó‡¶§ ‡¶§‡¶•‡ßç‡¶Ø</h4>
                    <div style="background: rgba(86, 41, 190, 0.1); padding: 1rem; border-radius: 8px;">
                        <p><strong>‡¶∏‡ßá‡¶¨‡¶æ‡¶∞ ‡¶ß‡¶∞‡¶®:</strong> ${professional.service || 'N/A'}</p>
                        <p><strong>‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ:</strong> ${professional.experience || 'N/A'}</p>
                        <p><strong>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</strong> ${professional.address || 'N/A'}</p>
                        <p><strong>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${new Date(professional.createdAt).toLocaleDateString('bn-BD')}</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</h4>
                    <div style="background: rgba(86, 41, 190, 0.1); padding: 1rem; border-radius: 8px;">
                        <p><strong>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏:</strong> 
                            <span class="status-badge ${getStatusClass(professional.status)}" style="margin-left: 0.5rem;">
                                ${getStatusText(professional.status)}
                            </span>
                        </p>
                        <p><strong>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™:</strong> ${professional.accountType || 'professional'}</p>
                    </div>
                </div>
                
                <div class="modal-footer" style="margin-top: 1.5rem; padding: 1rem 0 0; border-top: 1px solid var(--dark-border);">
                    ${professional.status === 'pending' ? `
                        <button class="btn btn-success" onclick="approveProfessional('${professional.email}')">
                            <i class="fas fa-check"></i> ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶¶‡¶ø‡¶®
                        </button>
                        <button class="btn btn-danger" onclick="rejectProfessional('${professional.email}')">
                            <i class="fas fa-times"></i> ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    ` : ''}
                    <button class="btn" onclick="closeModal()">
                        ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            `;
            
            document.getElementById('professionalModal').style.display = 'flex';
        }

        // View service request details
        function viewServiceRequest(requestId) {
            const requests = JSON.parse(localStorage.getItem('service_requests') || '[]');
            const request = requests.find(req => req.id === requestId);
            
            if (!request) {
                alert('‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø');
                return;
            }
            
            selectedRequest = request;
            
            document.getElementById('requestModalBody').innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h4>
                    <div style="background: rgba(86, 41, 190, 0.1); padding: 1rem; border-radius: 8px;">
                        <p><strong>‡¶®‡¶æ‡¶Æ:</strong> ${request.customerName || '‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï'}</p>
                        <p><strong>‡¶´‡ßã‡¶®:</strong> ${request.customerPhone || 'N/A'}</p>
                        <p><strong>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</strong> ${request.customerAddress || 'N/A'}</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">‡¶∏‡ßá‡¶¨‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§</h4>
                    <div style="background: rgba(86, 41, 190, 0.1); padding: 1rem; border-radius: 8px;">
                        <p><strong>‡¶∏‡ßá‡¶¨‡¶æ‡¶∞ ‡¶ß‡¶∞‡¶®:</strong> ${getServiceName(request.serviceType)}</p>
                        <p><strong>‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶¨‡¶∞‡ßç‡¶£‡¶®‡¶æ:</strong></p>
                        <div style="background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 6px; margin-top: 0.5rem;">
                            ${request.problemDescription || 'N/A'}
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</h4>
                    <div style="background: rgba(86, 41, 190, 0.1); padding: 1rem; border-radius: 8px;">
                        <p><strong>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏:</strong> 
                            <span class="status-badge ${getStatusClass(request.status)}" style="margin-left: 0.5rem;">
                                ${getStatusText(request.status)}
                            </span>
                        </p>
                        <p><strong>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${new Date(request.createdAt || new Date()).toLocaleDateString('bn-BD')}</p>
                    </div>
                </div>
                
                <div class="modal-footer" style="margin-top: 1.5rem; padding: 1rem 0 0; border-top: 1px solid var(--dark-border);">
                    ${request.status === 'pending' ? `
                        <button class="btn btn-success" onclick="assignProfessional('${request.id}')">
                            <i class="fas fa-user-cog"></i> ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶¶‡¶ø‡¶®
                        </button>
                    ` : ''}
                    <button class="btn" onclick="closeModal()">
                        ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            `;
            
            document.getElementById('requestModal').style.display = 'flex';
        }

        // Approve a professional
        function approveProfessional(email) {
            if (!confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û‡¶ï‡ßá ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                return;
            }
            
            // Update in applications
            let applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            applications = applications.map(app => {
                if (app.email === email) {
                    return { ...app, status: 'approved', approvedAt: new Date().toISOString() };
                }
                return app;
            });
            localStorage.setItem('nibash_applications', JSON.stringify(applications));
            
            // Update in users
            let users = JSON.parse(localStorage.getItem('nibash_users') || '[]');
            users = users.map(user => {
                if (user.email === email) {
                    return { ...user, status: 'active' };
                }
                return user;
            });
            localStorage.setItem('nibash_users', JSON.stringify(users));
            
            alert('‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            closeModal();
            loadDashboardData();
            loadAllProfessionals();
            loadAllUsers();
        }

        // Reject a professional
        function rejectProfessional(email) {
            if (!confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û‡¶ï‡ßá ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                return;
            }
            
            let applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            applications = applications.map(app => {
                if (app.email === email) {
                    return { ...app, status: 'rejected', rejectedAt: new Date().toISOString() };
                }
                return app;
            });
            localStorage.setItem('nibash_applications', JSON.stringify(applications));
            
            let users = JSON.parse(localStorage.getItem('nibash_users') || '[]');
            users = users.map(user => {
                if (user.email === email) {
                    return { ...user, status: 'inactive' };
                }
                return user;
            });
            localStorage.setItem('nibash_users', JSON.stringify(users));
            
            alert('‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            closeModal();
            loadDashboardData();
            loadAllProfessionals();
            loadAllUsers();
        }

        // Assign professional to service request
        function assignProfessional(requestId) {
            // Get approved professionals
            const applications = JSON.parse(localStorage.getItem('nibash_applications') || '[]');
            const approvedProfessionals = applications.filter(app => app.status === 'approved');
            
            if (approvedProfessionals.length === 0) {
                alert('‡¶ï‡ßã‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶®‡ßá‡¶á‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }
            
            // Show professional selection
            let options = '<option value="">‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>';
            approvedProfessionals.forEach(pro => {
                options += `<option value="${pro.email}">${pro.fullName} - ${pro.service}</option>`;
            });
            
            const selectedPro = prompt(`‡¶®‡¶ø‡¶Æ‡ßç‡¶®‡¶≤‡¶ø‡¶ñ‡¶ø‡¶§ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶•‡ßá‡¶ï‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:\n${approvedProfessionals.map(p => `${p.fullName} (${p.service})`).join('\n')}\n\n‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û‡ßá‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®:`);
            
            if (!selectedPro) return;
            
            const professional = approvedProfessionals.find(p => p.email === selectedPro);
            if (!professional) {
                alert('‡¶∏‡¶†‡¶ø‡¶ï ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®');
                return;
            }
            
            // Update service request
            let requests = JSON.parse(localStorage.getItem('service_requests') || '[]');
            requests = requests.map(req => {
                if (req.id === requestId) {
                    return { 
                        ...req, 
                        status: 'assigned',
                        assignedTo: professional.email,
                        assignedToName: professional.fullName,
                        assignedAt: new Date().toISOString()
                    };
                }
                return req;
            });
            localStorage.setItem('service_requests', JSON.stringify(requests));
            
            alert(`‡¶∏‡ßá‡¶¨‡¶æ ${professional.fullName} ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!`);
            closeModal();
            loadDashboardData();
            loadAllServiceRequests();
        }

        // Helper functions
        function getStatusClass(status) {
            switch(status) {
                case 'pending': return 'status-pending';
                case 'approved': return 'status-approved';
                case 'rejected': return 'status-rejected';
                case 'active': return 'status-active';
                case 'assigned': return 'status-active';
                case 'completed': return 'status-approved';
                case 'cancelled': return 'status-rejected';
                default: return 'status-pending';
            }
        }

        function getStatusText(status) {
            switch(status) {
                case 'pending': return '‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®';
                case 'approved': return '‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§';
                case 'rejected': return '‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶§';
                case 'active': return '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º';
                case 'assigned': return '‡¶®‡¶ø‡¶Ø‡¶º‡ßã‡¶ó‡¶ï‡ßÉ‡¶§';
                case 'completed': return '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®';
                case 'cancelled': return '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤';
                default: return '‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®';
            }
        }

        function getServiceName(serviceId) {
            const services = {
                '1': '‡¶¨‡ßà‡¶¶‡ßç‡¶Ø‡ßÅ‡¶§‡¶ø‡¶ï ‡¶ï‡¶æ‡¶ú',
                '2': '‡¶™‡ßç‡¶≤‡¶æ‡¶Æ‡ßç‡¶¨‡¶ø‡¶Ç',
                '3': '‡¶∞‡¶Ç ‡¶ì ‡¶∏‡¶ú‡ßç‡¶ú‡¶æ',
                '4': '‡¶è‡¶Ø‡¶º‡¶æ‡¶∞‡¶ï‡¶®‡ßç‡¶°‡¶ø‡¶∂‡¶®‡¶ø‡¶Ç',
                '5': '‡¶ï‡¶æ‡¶†‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú',
                '6': '‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø'
            };
            return services[serviceId] || '‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶∏‡ßá‡¶¨‡¶æ';
        }

        function closeModal() {
            document.getElementById('professionalModal').style.display = 'none';
            document.getElementById('requestModal').style.display = 'none';
        }

        function logout() {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                localStorage.removeItem('nibash_user');
                localStorage.removeItem('user_role');
                window.location.href = 'index.html';
            }
        }

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('professionalModal') || 
                e.target === document.getElementById('requestModal')) {
                closeModal();
            }
        });
    </script>
</body>
</html>
